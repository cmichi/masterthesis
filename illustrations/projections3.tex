\documentclass[tikz]{standalone}

\input{misc/header}

\begin{document}

\tikzset{
	box/.style={
		draw=strokecolor0,fill=bgcolor0,thick,
		%minimum width=2.5cm,
		minimum height=2cm, rounded corners=.55cm, inner sep=2pt,
		text width = 3.7cm, align = center
	}
}

\begin{tikzpicture}[node distance=1em, scale=1, decoration=brace]
	\def\yTopA{0};
	\def\yTopB{-1};
	\def\yTopC{-2};

	%\def\xMark{0}
	%\node [box]  (e0) at (\xMark, \yTopA) {CreatedCart\\Customer = Alice};

	\def\xMark{2.0}
	\node [box]  (e1) at (\xMark, \yTopA) {\large Command\\{\normalsize\ttfamily fetchCurrencyRate()}};

	\def\xMark{6.7}
	\node [box]  (e2) at (\xMark, \yTopA) 
		{\large Event\\{\normalsize\ttfamily success = true\\usd2eur = 1.3}};
		%{AddedProduct(Bob, A)};

	\def\xMark{11.4}
	\node [box]  (e3) at (\xMark, \yTopA) 
		{\large Command\\{\normalsize\ttfamily createOrder()}};
		%{RemovedProduct(Alice, A)};

	\def\xMark{16.1}
	\node [box]  (e4) at (\xMark, \yTopA) 
		{\large Event\\{\normalsize\ttfamily success = false}};
		%{OrderPlaced(Bob)};

	\def\xMark{20.8}
	\node [box, fill = bgcolor2]  (e5) at (\xMark, \yTopA) 
		{\large Command\\{\normalsize\ttfamily sendConfirmation()}};
		%{OrderPlaced(Bob)};

	\draw [dotted,] (-1.0,0) to (-0.6,0);
	\draw [arrow] (-0.6,0.0) to (e1);
	\draw [arrow] (e1) to (e2);
	\draw [arrow] (e2) to (e3);
	\draw [arrow] (e3) to (e4);
	\draw [arrow] (e4) to (e5);
	\draw [arrow] (e5) to (23.5,0);
	\draw [dotted,] (23.5,0) to (23.5+0.5,0);

\end{tikzpicture}

\end{document}
